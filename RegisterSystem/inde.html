<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>
	东南大学2014最具影响力毕业生
	</title>
	<link rel="stylesheet" href="buttons.css">
</head>
<script type = "text/javascript" src="info_js.js"></script>
<script type="text/javascript" src="json.js"></script>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script language="javascript" type="text/javascript">
function haveChinese(s){
	var patrn=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi;  
    if(!patrn.exec(s)){  
    	return false;  
    }  
    else{  
    	return true;  
    }  
}

function submitAndSet(){
	var x= document.getElementById("doc").value;
	if (x=="") {
		window.alert("请先上传证件照！");
	} else{
		var ju = haveChinese(x);
		if (ju) {
			window.alert("照片名称请勿包含中文！");
		} else{
			ajaxFileUpload();
		};
	};
	return false;
}
function submitAndSet1(){
	var x= document.getElementById("doc1").value;
	if (x=="") {
		window.alert("请先上传生活照！");
	} else{
		var ju = haveChinese(x);
		if (ju) {
			window.alert("照片名称请勿包含中文！");
		} else{
			ajaxFileUpload1();
		}
	};
	return false;
}
/*function check_pic(){
	if (document.getElementById('submitPic').value != "上传成功") {
		window.alert("请先上传证件照！");
	} else{
		if (document.getElementById('submitPic1').value != "上传成功") {
			window.alert("请先上传生活照！")
		} else{
			return true;
		};
	};
}*/
function checkMaxInput1(obj,maxLen,remLen) {
	if (obj.value.length > maxLen){	//如果输入的字数超过了限制
		obj.value = obj.value.substring(0, maxLen);	//就去掉多余的字
		remLen.innerText = '您输入的内容超出了字数限制'
	}
	else{
		remLen.innerText = '(限50字以内，后期用于投票页面的简短介绍)!还能输入' + (maxLen - obj.value.length) + '字';//计算并显示剩余字数
	}
}//new function

function checkMaxInput2(obj,maxLen,remLen) {
	if (obj.value.length > maxLen){	//如果输入的字数超过了限制
		obj.value = obj.value.substring(0, maxLen);	//就去掉多余的字
		remLen.innerText = '您输入的内容超出了字数限制'
	}
	else{
		remLen.innerText = '(限800字以内，可为所获荣誉、论文发表情况等，请列点说明)!还能输入' + (maxLen - obj.value.length) + '字';//计算并显示剩余字数
	}
}//new function

function checkMaxInput3(obj,maxLen,remLen) {
	if (obj.value.length > maxLen){	//如果输入的字数超过了限制
		obj.value = obj.value.substring(0, maxLen);	//就去掉多余的字
		remLen.innerText = '您输入的内容超出了字数限制'
	}
	else{
		remLen.innerText = '(限1000字以内，可为个人情况详细介绍等)!还能输入' + (maxLen - obj.value.length) + '字';//计算并显示剩余字数
	}
}//new function

function setImagePreview() {
var docObj=document.getElementById("doc");

var imgObjPreview=document.getElementById("preview");
    if(docObj.files && docObj.files[0]){
        //火狐下，直接设img属性
        imgObjPreview.style.display = 'block';
        imgObjPreview.style.width = '158px';
        imgObjPreview.style.height = '195px'; 
        //imgObjPreview.src = docObj.files[0].getAsDataURL();                   
        //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式  
        imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);
    }else{
        //IE下，使用滤镜
        docObj.select();
        var imgSrc = document.selection.createRange().text;
        var localImagId = document.getElementById("localImag");
        //必须设置初始大小
        localImagId.style.width = "158px";
        localImagId.style.height = "195px";
        //图片异常的捕捉，防止用户修改后缀来伪造图片
        try{
            localImagId.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
            localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;
        }catch(e){
            alert("您上传的图片格式不正确，请重新选择!");
            return false;
        }
        imgObjPreview.style.display = 'none';
        document.selection.empty();
    }
    return true;
    // window.alert(document.selection.)
}

function setImagePreview1() {
var docObj=document.getElementById("doc1");

var imgObjPreview1=document.getElementById("preview1");
    if(docObj.files && docObj.files[0]){
        //火狐下，直接设img属性
        imgObjPreview1.style.display = 'block';
        imgObjPreview1.style.width = '158px';
        imgObjPreview1.style.height = '195px'; 
        //imgObjPreview.src = docObj.files[0].getAsDataURL();                   
        //火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式  
        imgObjPreview1.src = window.URL.createObjectURL(docObj.files[0]);
    }else{
        //IE下，使用滤镜
        docObj.select();
        var imgSrc = document.selection.createRange().text;
        var localImagId = document.getElementById("localImag");
        //必须设置初始大小
        localImagId.style.width = "158px";
        localImagId.style.height = "195px";
        //图片异常的捕捉，防止用户修改后缀来伪造图片
        try{
            localImagId.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
            localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;
        }catch(e){
            alert("您上传的图片格式不正确，请重新选择!");
            return false;
        }
        imgObjPreview1.style.display = 'none';
        document.selection.empty();
    }
    return true;
    // window.alert(document.selection.)
}
</script>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="ajaxfileupload.js"></script>
<script type="text/javascript">
function ajaxFileUpload()
	{
		$.ajaxFileUpload
		(
			{
				url:'doajaxfileupload.php',
				secureuri:false,
				fileElementId:'doc',
				dataType: 'json',
				data:{name:'logan', id:'id'},
				success: function (data, status)
				{
					if(typeof(data.error) != 'undefined')
					{
						if(data.error != '')
						{
							alert(data.error);
						}else
						{
							alert(data.msg);
						}
					}
				},
				error: function (data, status, e)
				{
					alert(e);
				}
			}
		)
		
	/*	return false;*/
}
function ajaxFileUpload1()
	{
		$.ajaxFileUpload
		(
			{
				url:'doajaxfileupload1.php',
				secureuri:false,
				fileElementId:'doc1',
				dataType: 'json',
				data:{name:'logan', id:'id'},
				success: function (data, status)
				{
					if(typeof(data.error) != 'undefined')
					{
						if(data.error != '')
						{
							alert(data.error);
						}else
						{
							alert(data.msg);
						}
					}
				},
				error: function (data, status, e)
				{
					alert(e);
				}
			}
		)
		
	/*	return false;*/
}
</script>

<style type="text/css">

body {background:#e8e8e8;}


textarea{
	position: relative;
	vertical-align:top;
}

.information{
	margin: 20% auto 0;
	height: 0px;
	width: 20%;
	display: inline;
}

.detailInfoL{
	position: relative;
	width: 60%;
	height: 640px;
	left: 0%;
}

.detailInfoR{
	float: right;
	width: 290px;
	height: 640px;
	left: 50%;
	text-align: center;
	box-shadow: 0 0 1px #011331;
	border-radius: 5px;
	padding: 10px;
	overflow: hidden;
}

.picUpload{
	height: 320px;
	position: relative;
}

.bigContent{
	position: relative;
	background-color: #eff9f8;
	width: 800px;
	left: 50%;
	margin-left: -400px;
	box-shadow: 0 0 1px #011331;
	border-radius: 5px;
	padding: 10px;
	overflow: hidden;
}

.describeAndOther{
/*	background-color: #99CCFF;*/
	position: relative;
	width: 100%;
	height: 800px;
}
.labelArea{
	float: left;
	position: relative;
	width: 480px;
	margin-right: 10px;
	line-height: 42px;
	font-size: 14px;
	color: #666;
	font-weight: bold;
	text-align: center;
	margin-top: 6px;
}
.labelArea0{
	position: relative;
	line-height: 42px;
	left: 15px;
	width: 800px;
	font-size: 15px;
	color: #666;
	font-weight: bold;
	margin-top: 6px;
}
.inputArea{
	display: block;
	position: relative;
	float: right;
	width: 328px;
	height: 30px;
	padding: 5px 5px 5px 5px;
	margin-right: 10px;
	border: 1px solid #ddd;
	font-size: 14px;
	color: #666;
}
.inputArea0{
	position: relative;
	width: 800px;
	height: 75px;
	font-size: 14px;
	color: #666;
}
.inputArea1{
	position: relative;
	width: 800px;
	height: 240px;
	font-size: 14px;
	color: #666;
}
.inputArea2{
	position: relative;
	width: 800px;
	height: 260px;
	font-size: 14px;
	color:#666;
}
.radioArea0{
	position: relative;
	margin-right: 20px;
	margin-top: 20px;
	line-height: 42px;
	font-size: 14px;
	font-weight: bold;
}
.radioArea{
	position: relative;
	margin-right: 10px;
	line-height: 42px;
	font-size: 14px;
}
.tipInfo{
	color: #202020;
	width: 800px;
	position: relative;
	line-height: 15px;
	font-size: 10px;
}

</style>

</head>

<?php
	session_start();
	if (isset($_SESSION['loginName']){
		if ($_SESSION['loginName'] == null)
			header('Location: http://127.0.0.1');
	}
	else{header('Location: http://127.0.0.1');}
?>
<body onload="_loadDet()">
<div class="bigContent">
	<div style="color:#0099CC">
		<h1 align="center">东南大学最具影响力毕业生</h1>
		<h2 align="center">个人信息</h2>
		<hr />
	</div>

	<div class="detailInfoR">
	<form name='form' action="" method="post" enctype="multipart/form-data">
		<div class="picUpload">
			<p style="font-size: 8px;color: #666;	font-weight: bold;">注意：照片名称请勿包含中文以学号命名最佳！</p>
			<p style="font-size: 14px;color: #666;	font-weight: bold;">请在此处上传您的证件照</p>
			<div name = "preview" style="position:relative;left:75px;width:160px;">
				<div id="localImag" style="height:195px;"><img id="preview" style="width:158px;height:195px;position:relative;diplay:none" src=""/></div>
				<input type="file" name="doc" id="doc" style="position:relative;left:-10px;top:10px;align:center" onchange="javascript:setImagePreview();">
			</div>
			<input type="button" id="submitPic" value="上传图片" style="position:relative;left:-45px;top:10px;" onclick="return submitAndSet();"/>
		</div>
		
		</form>
		<hr>

		<form name='form1' action="" method="post" enctype="multipart/form-data">
		<div class="picUpload">
			<p style="font-size: 14px;color: #666;	font-weight: bold;">请在此处上传您的生活照</p>
			<div name = "preview1" style="position:relative;left:75px;width:160px;">
				<div id="localImag1" style="height:195px;"><img id="preview1" style="width:158px;height:195px;position:relative;diplay:none" src=""/></div>
				<input type="file" name="doc1" id="doc1" style="position:relative;left:-10px;top:10px;align:center" onchange="javascript:setImagePreview1();">
			</div>
			<input type="button" id="submitPic1" value="上传图片" style="position:relative;left:-45px;top:10px;" onclick="return submitAndSet1();"/>
		</div>
		
		</form>
	
	</div>
	<div class="detailInfoL">
		<div id = "information" class = "information">
			<form>
				<label class="labelArea">姓&nbsp;&nbsp;名&nbsp;&nbsp;:<input type = "text" id = "realname" class="inputArea"></label>
			</form>

			<form>
				<label class="labelArea" style="width:130px;">性　别&nbsp;&nbsp;:</label>
					<input type = "radio" name = "sex" value = "male" class="radioArea0" checked="" id="male"><label label style="	font-size: 14px;
					font-weight: bold;color:#666;">男</label>　　　　
					<input type = "radio" name = "sex" value = "female" class='radioArea0' id="female"><label label style="	font-size: 14px;
					font-weight: bold;color:#666;">女</label>				
			</form>

			<form>
				<label class="labelArea">政治面貌:&nbsp;
				<select id = "politicallandscape" class="inputArea" style="width:340px;height:42px;">
					<option value = "moren">----请选择政治面貌----</option>
					<option>群众</option>
					<option>团员</option>
					<option>中共党员</option>
					<option>中共预备党员</option>
				</select>
				</label>
			</form>

			<form>
				<label class="labelArea">学&nbsp;&nbsp;号&nbsp;&nbsp;:<input type = "text" id = "number" class="inputArea"></label>
			</form>

			<form>
				<label class="labelArea">民&nbsp;&nbsp;族&nbsp;&nbsp;:<input type = "text" id = "nation" class="inputArea"></label>
			</form>

			<form>
				<label class="labelArea">手&nbsp;&nbsp;机&nbsp;&nbsp;:<input type = "text" id = "tele" class="inputArea"></label>
			</form>

			<form>
				<label class="labelArea">院&nbsp;&nbsp;系&nbsp;&nbsp;:
					<select id = "college" class="inputArea" style="	width: 340px;height:42px;">
						<option value = "moren" selected>----请选择院系----</option>
					    <option>建筑学院</option>
					    <option>机械工程学院</option>
					    <option>能源与环境学院</option>
					    <option>信息科学与工程学院</option>
					    <option>土木工程学院</option>
					    <option>电子科学与工程学院</option>
					    <option>数学系</option>
						<option>自动化学院</option>
						<option>计算机科学与工程学院</option>
						<option>物理系</option>
						<option>生物科学与医学工程学院</option>
						<option>材料科学与工程学院</option>
						<option>人文学院</option>
						<option>经济管理学院</option>
						<option>电气工程学院</option>
						<option>外国语学院</option>
						<option>化学化工学院</option>
						<option>交通学院</option>
						<option>仪器科学与工程学院</option>	
						<option>艺术学院</option>
						<option>法学院</option>
						<option>学习科学研究中心</option>
						<option>公共卫生学院</option>
						<option>医学院</option>
						<option>吴健雄学院</option>
						<option>软件学院</option>
						<option>无锡分校</option> 
				    </select>
				    </label>
			</form>
			
			<form>
				<label class="labelArea">电子邮箱:<input type = "text" id = "email" class="inputArea"></label>
			</form>

			<form>
				<label class="labelArea">毕业高中:<input type = "text" id = "highschool" class="inputArea"></label>
			</form>

			<form>
				<label class="labelArea" style="font-size:12px;	line-height: 42px; width:280px;">是否同意在人人网、新浪微博等公开个人信息</label>
				<input type = "radio" name = "judge" value = "同意" id='同意' checked="" class="radioArea0"><label style="	font-size: 14px;
					font-weight: bold;color:#666;">同意&nbsp;</label>
				<input type = "radio" name = "judge" value = "不同意" id='不同意' class="radioArea0"><label style="	font-size: 14px;
					font-weight: bold;color:#666;">不同意</label>
			</form>

	        <form>
	        	<label class="labelArea">影响力类型:
	        	<select id = "type" class="inputArea" style="	width: 340px;height:42px;">
	        		<option value = "moren">----请选择影响力类型----</option>
	        		<option>学术影响力</option>
	        	    <option>创业影响力</option>
	        	    <option>道德影响力</option>
	        	    <option>公益影响力</option>
	        	    <option>自强影响力</option>
	        	    <option>正义影响力</option>
	        	    <option>领袖影响力</option>
	        	    <option>文体影响力</option>
	        	    <option>其他</option>
	        	</select>
	        	</label>
	   	    </form>

	   	    <form>
	   	    	<label class="labelArea"  style="width:130px;">推荐类型:</label>
	   	    	<div>
	   	    	<input type = "radio" name = "recommend" id="院系推荐" value="院系推荐" class="radioArea0" checked="" onClick="document.all.checkJYM.disabled=false;document.all.checkJYM.value=''"><label style="font-size: 14px;font-weight: bold;color:#666;">院系推荐&nbsp;</label>

	   	    	<input type = "radio" name = "recommend" id="自我推荐" value="自我推荐" class = "radioArea1" onClick="document.all.checkJYM.disabled=true;document.all.checkJYM.value='无需校验码'"><label style="font-size: 14px;font-weight: bold;color:#666;">自我推荐&nbsp;</label>

	   	    	<input type = "text" id = "checkJYM" class = "inputArea" placeholder="若为院系推荐，请输入校验码">
				</div>

	   	    </form>    	

        </div>
    </div>

    <br/>

    <div name = "message" class="describeAndOther">
    	<br/>
    	<div style="height:140px;">
			<label class="labelArea0">个人影响力描述:</label>
			<div class="inputArea0">
			<textarea id = "describe" rows = "4" cols = "65" onkeyup = "javascript:chkmaxsms(this,'50');checkMaxInput1(this,50,remLen1);" style="margin-left:125px;"></textarea>
			</div>

		 	<div class="tipInfo">
		 	<tr>
				<td><a id="remLen1" style = "font-size:10px ; position:relative ; float:right;margin-right:200px;">(限50字以内，后期用于投票页面的简短介绍)!还能输入50字</a></td>
			</tr>
			</div>
		</div>

	    <div style="height:310px;">
			<label class="labelArea0">影响力证明材料:</label>
			<div class="inputArea1">
			<textarea id = "material" rows = "15" cols = "65" onkeyup = "javascript:chkmaxsms(this,'800');checkMaxInput2(this,800,remLen2);" style="margin-left:125px;"></textarea>
			</div>
			<div class="tipInfo">
			<tr>
				<td><p id="remLen2" style = "font-size:10px ; position:relative ; float:right;margin-right:200px;">(限800字以内，可为所获荣誉、论文发表情况等，请列点说明)!还能输入800字</p></td>
			</tr>
			<br/>
			</div>
	    </div>

	    <div style="height:310px;">
    		<label class="labelArea0">个人详细介绍:</label>
    		<div class="inputArea1">
    		<textarea id = "introduce" rows = "15" cols = "65" onkeyup = "javascript:chkmaxsms(this,'1000');checkMaxInput3(this,1000,remLen3);" style = "margin-left:125px;"></textarea>
    		</div>

    		<div class="tipInfo">
    			<tr>
    				<td><p id="remLen3" style = "font-size:10px ; position:relative ; float:right;margin-right:200px;">(限1000字以内，可为个人情况详细介绍等)!还能输入1000字</p></td>
    			</tr>
    			<br/>
    		</div>
    	</div>

    </div>


     <div style = "clear:both;position:relative;margin-left:40%;margin-top:5%;">
    	<form action = "" netgid = "post">
    	<input type = "button" value = "保存并提交" class="button glow button-rounded button-flat" onclick = "_submit()">
        </form>
    </div>

    <hr>
    <div style="width:800px; text-align:center;font-family:'黑体';font-size:14px;color:gray;">东南大学学生处|东南大学教育基金会|能源与环境学院|计算机科学与工程学院、软件学院</div>
    <div style="width:800px; text-align:center;font-family:'黑体';font-size:14px;color:gray;">Copyright @ 软件学院 I++ Club</div>

</div>

</body>

</html>